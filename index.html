<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>私たちのありがとうを皆様へ | カタログギフトご注文フォーム</title>
  <meta name="description" content="結婚式カタログギフトの第1・第2希望をオンラインでご注文いただけます。" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .bg-floral {
      background-image: linear-gradient(rgba(255,255,255,0.92), rgba(255,255,255,0.95)), url('https://images.unsplash.com/photo-1501594907352-04cda38ebc29?q=80&w=2070&auto=format&fit=crop');
      background-size: cover;
      background-position: center;
    }
    .heading-font { letter-spacing: 0.08em; font-family: 'Georgia', serif; }
  </style>
</head>
<body class="min-h-screen bg-floral text-slate-800">
  <!-- Header -->
  <header class="max-w-4xl mx-auto px-6 pt-14 pb-8 text-center">
    <p class="text-sm tracking-widest text-slate-500">THANK YOU</p>
    <h1 class="mt-2 text-3xl md:text-5xl font-semibold heading-font">私たちのありがとうを皆様へ</h1>
    <p class="mt-4 text-base md:text-lg leading-relaxed text-slate-700">今回は、私たちが普段お世話になっている方々の商品を中心に、カタログギフトとしてご用意しました。<br class="hidden md:inline"/>第1・第2希望を下記フォームからお知らせください。</p>
  </header>

  <!-- Steps -->
  <section class="max-w-5xl mx-auto px-6">
    <div class="grid md:grid-cols-3 gap-6">
      <div class="bg-white/80 backdrop-blur rounded-3xl p-6 shadow-md hover:shadow-lg transition">
        <p class="text-xs font-medium tracking-wider text-slate-500">STEP 1</p>
        <h3 class="mt-2 font-semibold text-lg">カタログを見て商品を選ぶ</h3>
      </div>
      <div class="bg-white/80 backdrop-blur rounded-3xl p-6 shadow-md hover:shadow-lg transition">
        <p class="text-xs font-medium tracking-wider text-slate-500">STEP 2</p>
        <h3 class="mt-2 font-semibold text-lg">第1・第2希望を入力</h3>
        <p class="mt-1 text-sm text-slate-600">在庫状況により第2希望をお届けする場合があります。</p>
      </div>
      <div class="bg-white/80 backdrop-blur rounded-3xl p-6 shadow-md hover:shadow-lg transition">
        <p class="text-xs font-medium tracking-wider text-slate-500">STEP 3</p>
        <h3 class="mt-2 font-semibold text-lg">フォーム送信で完了</h3>
      </div>
    </div>
  </section>

  <!-- Form -->
  <main class="max-w-3xl mx-auto px-6 py-10">
    <form id="orderForm" class="bg-white/95 backdrop-blur rounded-3xl shadow-lg p-8">
      <h2 class="text-2xl font-semibold mb-6 text-center">ご注文フォーム</h2>

      <!-- contact info -->
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label class="block text-sm font-medium">お名前（姓）<span class="text-rose-600">＊</span></label>
          <input type="text" name="last_name" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600" />
        </div>
        <div>
          <label class="block text-sm font-medium">お名前（名）<span class="text-rose-600">＊</span></label>
          <input type="text" name="first_name" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600" />
        </div>
        <div>
          <label class="block text-sm font-medium">メールアドレス<span class="text-rose-600">＊</span></label>
          <input type="email" name="email" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600" />
        </div>
        <div>
          <label class="block text-sm font-medium">電話番号<span class="text-rose-600">＊</span></label>
          <input type="tel" name="tel" inputmode="tel" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600" />
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-medium">住所</label>
          <input type="text" name="address" placeholder="例：岐阜県岐阜市◯◯1-2-3" class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600" />
        </div>
      </div>

      <hr class="my-6"/>

      <!-- choices -->
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label class="block text-sm font-medium">第1希望<span class="text-rose-600">＊</span></label>
          <select name="choice1" id="choice1" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600"></select>
        </div>
        <div>
          <label class="block text-sm font-medium">第2希望<span class="text-rose-600">＊</span></label>
          <select name="choice2" id="choice2" required class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600"></select>
        </div>
      </div>

      <div class="mt-5">
        <label class="block text-sm font-medium">備考（任意）</label>
        <textarea name="note" rows="4" class="mt-1 w-full rounded-xl border-slate-300 focus:border-slate-600 focus:ring-slate-600"></textarea>
      </div>

      <div class="mt-6 flex items-start gap-3">
        <input id="agree" type="checkbox" class="mt-1" required />
        <label for="agree" class="text-sm text-slate-700">入力内容に間違いがないこと、在庫状況により第2希望をご用意する場合があることに同意します。</label>
      </div>

      <div class="mt-8 text-center">
        <button id="submitBtn" type="submit" class="px-8 py-3 rounded-full bg-slate-900 text-white font-medium hover:bg-slate-800 disabled:opacity-50 shadow-md">注文を確定する</button>
        <p id="status" class="text-sm mt-3"></p>
      </div>

      <p class="mt-4 text-xs text-slate-500 text-center">個人情報は本ギフトの発送以外の目的には使用しません。</p>
    </form>
  </main>

  <footer class="max-w-4xl mx-auto px-6 pb-12 text-center text-sm text-slate-600">
    <p>お問い合わせ：<a href="mailto:info@example.jp" class="underline">info@example.jp</a> ／ TEL: 000-0000-0000</p>
    <p class="mt-2">© 2025 Wedding Catalog</p>
  </footer>

  <script>
    const ITEMS = [
      'ブルシック',
      '白日さん',
      '外のヒロセさん',
      '八木さんお花ギフト',
      'ヒュッゲ珈琲さん',
      'トマトギフト',
      'プロゴルフレッスン',
      '東さんパーソナルレッスン',
      '真衣さんネイルマッサージ',
      '知佳さんカット＋ヘッドスパ',
      'プロフ写真の家族写真撮影',
      '志津ママのお店'
    ];

    const choice1 = document.getElementById('choice1');
    const choice2 = document.getElementById('choice2');

    function fillOptions(sel) {
      sel.innerHTML = '<option value="" disabled selected>選択してください</option>' +
        ITEMS.map(v => `<option>${v}</option>`).join('');
    }
    fillOptions(choice1);
    fillOptions(choice2);

    choice1.addEventListener('change', () => {
      if (choice2.value && choice2.value === choice1.value) alert('第1希望と第2希望が同じです。必要に応じて変更してください。');
    });
    choice2.addEventListener('change', () => {
      if (choice1.value && choice2.value === choice1.value) alert('第1希望と第2希望が同じです。必要に応じて変更してください。');
    });

    const ENDPOINT_URL = '';

    document.getElementById('orderForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const status = document.getElementById('status');
      const btn = document.getElementById('submitBtn');
      status.textContent = '';

      const fd = new FormData(e.target);
      const payload = Object.fromEntries(fd.entries());
      payload.timestamp = new Date().toISOString();

      if (!ENDPOINT_URL) {
        alert('送信先（ENDPOINT_URL）が未設定です。Google Apps ScriptのURLを設定してください。');
        return;
      }

      try {
        btn.disabled = true;
        status.textContent = '送信中…';

        const res = await fetch(ENDPOINT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        if (!res.ok) throw new Error('network');

        status.textContent = '送信が完了しました。ご入力ありがとうございました。';
        e.target.reset();
        fillOptions(choice1); fillOptions(choice2);
      } catch (err) {
        console.error(err);
        status.textContent = '送信に失敗しました。時間をおいて再度お試しください。';
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
